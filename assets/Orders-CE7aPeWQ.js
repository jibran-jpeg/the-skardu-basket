import{c as v,h as z,r as d,x as F,j as e,F as L,C as E}from"./index-DY7piRvx.js";import{F as I}from"./funnel-DM8z8SvR.js";import{P as M}from"./package-CVrMn48j.js";import{C as R}from"./calendar-C7LNXE0h.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],A=v("circle-x",q);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],N=v("eye",K);function U(){var f,k;const{getAllOrders:w,updateOrderStatus:S}=z(),[p,g]=d.useState([]),[c,o]=d.useState([]),[C,u]=d.useState(!0),[l,_]=d.useState(""),[i,O]=d.useState("all"),[s,b]=d.useState(null),[P,x]=d.useState(!1);d.useEffect(()=>{y()},[]);const y=async()=>{u(!0);try{const t=await w(),r=await Promise.all((t||[]).map(async a=>{const{data:n}=await F.from("order_items").select("*").eq("order_id",a.id);return{...a,items:n||[]}}));g(r),o(r)}catch(t){console.error("Error fetching orders:",t),g([]),o([])}finally{u(!1)}};d.useEffect(()=>{let t=[...p];if(i!=="all"&&(t=t.filter(r=>r.status===i)),l.trim()){const r=l.toLowerCase();t=t.filter(a=>a.order_number.toLowerCase().includes(r)||a.customer_name.toLowerCase().includes(r)||a.customer_email.toLowerCase().includes(r))}o(t)},[l,i,p]);const j=async(t,r)=>{(await S(t,r)).success&&y()},m=t=>{switch(t){case"pending":return"bg-amber-500/10 text-amber-600 dark:text-amber-400 border-amber-500/20";case"processing":return"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20";case"shipped":return"bg-purple-500/10 text-purple-600 dark:text-purple-400 border-purple-500/20";case"delivered":return"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20";case"cancelled":return"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20";default:return"bg-gray-100 dark:bg-white/5 text-gray-600 dark:text-gray-400 border-gray-200 dark:border-white/10"}},h=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=[{value:"all",label:"All Orders"},{value:"pending",label:"Pending"},{value:"processing",label:"Processing"},{value:"shipped",label:"Shipped"},{value:"delivered",label:"Delivered"},{value:"cancelled",label:"Cancelled"}];return C?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-brand-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading orders..."})]})}):e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-serif font-bold text-gray-900 dark:text-white mb-2",children:"Order Management"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage and track all customer orders"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("span",{className:"px-4 py-2 bg-brand-primary/10 text-brand-primary dark:text-brand-accent rounded-xl text-sm font-bold",children:[c.length," Orders"]})})]}),e.jsx("div",{className:"bg-white/60 dark:bg-[#1F2833]/60 backdrop-blur-xl rounded-3xl border border-white/40 dark:border-white/5 p-6 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by order number, customer name, or email...",value:l,onChange:t=>_(t.target.value),className:"w-full pl-12 pr-4 py-3 bg-gray-50 dark:bg-[#0B0C10] border border-gray-200 dark:border-white/10 rounded-2xl text-sm focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary/30 outline-none transition-all text-gray-800 dark:text-gray-200 placeholder-gray-400"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("select",{value:i,onChange:t=>O(t.target.value),className:"w-full pl-12 pr-10 py-3 bg-gray-50 dark:bg-[#0B0C10] border border-gray-200 dark:border-white/10 rounded-2xl text-sm focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary/30 outline-none transition-all text-gray-800 dark:text-gray-200 appearance-none cursor-pointer",children:D.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx(E,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:20})]})]})}),c.length===0?e.jsxs("div",{className:"bg-white/60 dark:bg-[#1F2833]/60 backdrop-blur-xl rounded-3xl border border-white/40 dark:border-white/5 p-16 text-center",children:[e.jsx(M,{size:64,className:"mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No orders found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:l||i!=="all"?"Try adjusting your filters":"Orders will appear here once customers place them"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block bg-white/60 dark:bg-[#1F2833]/60 backdrop-blur-xl rounded-3xl border border-white/40 dark:border-white/5 overflow-hidden shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50/50 dark:bg-black/20 border-b border-gray-100 dark:border-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Order"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Customer"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Items"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-white/5",children:c.map(t=>{var r,a;return e.jsxs("tr",{className:"hover:bg-white/50 dark:hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-brand-primary/10 flex items-center justify-center text-brand-primary font-bold text-sm",children:t.order_number.slice(-4)}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["#",t.order_number]})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.customer_name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.customer_email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[((r=t.items)==null?void 0:r.length)||0," items"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["PKR ",(a=t.total)==null?void 0:a.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("select",{value:t.status,onChange:n=>j(t.id,n.target.value),className:`px-3 py-1.5 rounded-full text-xs font-bold border uppercase tracking-wider cursor-pointer ${m(t.status)}`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(R,{size:14}),h(t.created_at)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>{b(t),x(!0)},className:"p-2 hover:bg-brand-primary/10 rounded-lg transition-colors text-brand-primary",children:e.jsx(N,{size:18})})})]},t.id)})})]})})}),e.jsx("div",{className:"lg:hidden space-y-4",children:c.map(t=>{var r,a;return e.jsxs("div",{className:"bg-white/60 dark:bg-[#1F2833]/60 backdrop-blur-xl rounded-2xl border border-white/40 dark:border-white/5 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white mb-1",children:["#",t.order_number]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:h(t.created_at)})]}),e.jsxs("select",{value:t.status,onChange:n=>j(t.id,n.target.value),className:`px-3 py-1 rounded-full text-xs font-bold border uppercase ${m(t.status)}`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Customer:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.customer_name})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Items:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:((r=t.items)==null?void 0:r.length)||0})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total:"}),e.jsxs("span",{className:"font-bold text-brand-primary dark:text-brand-accent",children:["PKR ",(a=t.total)==null?void 0:a.toLocaleString()]})]})]}),e.jsxs("button",{onClick:()=>{b(t),x(!0)},className:"w-full py-2 bg-brand-primary/10 hover:bg-brand-primary/20 text-brand-primary rounded-xl text-sm font-bold transition-colors flex items-center justify-center gap-2",children:[e.jsx(N,{size:16}),"View Details"]})]},t.id)})})]}),P&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>x(!1),children:e.jsxs("div",{className:"bg-white dark:bg-[#1F2833] rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-serif font-bold text-gray-900 dark:text-white",children:"Order Details"}),e.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(A,{size:24,className:"text-gray-400"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-3",children:"Order Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Order Number"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["#",s.order_number]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Date"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:h(s.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold border uppercase ${m(s.status)}`,children:s.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total"}),e.jsxs("p",{className:"text-sm font-bold text-brand-primary dark:text-brand-accent",children:["PKR ",(f=s.total)==null?void 0:f.toLocaleString()]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-3",children:"Customer Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Name"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.customer_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.customer_email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.customer_phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Address"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[s.address,", ",s.city]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-3",children:"Order Items"}),e.jsx("div",{className:"space-y-3",children:(k=s.items)==null?void 0:k.map((t,r)=>{var a;return e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-black/20 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.product_name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Qty: ",t.quantity]})]}),e.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["PKR ",(a=t.price)==null?void 0:a.toLocaleString()]})]},r)})})]})]})]})})]})}export{U as Orders};
