import{b as U,r as s,j as e,F as X,g as G,p as H,X as J,T as K,d as V}from"./index-CNOJuLki.js";import{F as W}from"./funnel-F1fQu4Od.js";import{L as Y}from"./loader-circle-CXf-KTYE.js";import{M as Z}from"./message-square-XK_sA6JJ.js";import{S as ee}from"./star-DmHls7K5.js";import{C as te}from"./chevron-left-CeW-tVUq.js";function ce(){const{getAllPendingReviews:P,getAllApprovedReviews:L,approveReview:z,rejectReview:f,toggleFeatured:M,products:re}=U(),[d,v]=s.useState("pending"),[b,$]=s.useState([]),[m,I]=s.useState([]),[T,j]=s.useState(!0),[n,w]=s.useState(""),[i,k]=s.useState("all"),[o,N]=s.useState("all"),[p,C]=s.useState("newest"),[l,x]=s.useState(1),u=10;s.useEffect(()=>{g()},[d]),s.useEffect(()=>{x(1)},[n,i,o,p,d]);const g=async()=>{if(j(!0),d==="pending"){const t=await P();$(t)}else{const t=await L();I(t)}j(!1)},D=async t=>{await z(t),g()},E=async t=>{await f(t),g()},B=async t=>{confirm("Are you sure you want to delete this approved review?")&&(await f(t),g())},q=async(t,a)=>{await M(t,a),g()},c=(()=>{let t=d==="pending"?b:m;return n&&(t=t.filter(a=>a.author.toLowerCase().includes(n.toLowerCase())||a.content.toLowerCase().includes(n.toLowerCase())||a.productName.toLowerCase().includes(n.toLowerCase()))),i!=="all"&&(t=t.filter(a=>a.rating===parseInt(i))),o!=="all"&&(t=t.filter(a=>a.productName===o)),t=[...t].sort((a,r)=>{const A=new Date(a.date),F=new Date(r.date);return p==="newest"?F-A:A-F}),t})(),h=Math.ceil(c.length/u),y=(l-1)*u,S=y+u,R=c.slice(y,S),Q=[...b,...m],_=[...new Set(Q.map(t=>t.productName))].sort(),O=()=>{w(""),k("all"),N("all"),C("newest"),x(1)};return e.jsxs("div",{className:"p-4 md:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-serif font-bold text-gray-900 dark:text-white mb-2",children:"Review Management"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage customer reviews with advanced filters"})]}),e.jsxs("div",{className:"flex gap-2 mb-6 bg-gray-100 dark:bg-white/5 p-1.5 rounded-2xl w-fit",children:[e.jsxs("button",{onClick:()=>v("pending"),className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${d==="pending"?"bg-white dark:bg-[#1a1f2e] text-brand-primary dark:text-brand-accent shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:["Pending ",b.length>0&&`(${b.length})`]}),e.jsxs("button",{onClick:()=>v("approved"),className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${d==="approved"?"bg-white dark:bg-[#1a1f2e] text-brand-primary dark:text-brand-accent shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:["Approved ",m.length>0&&`(${m.length})`]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1f2e] rounded-2xl p-4 md:p-6 mb-6 border border-gray-100 dark:border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(W,{size:18,className:"text-brand-primary dark:text-brand-accent"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Filters & Search"}),e.jsx("button",{onClick:O,className:"ml-auto text-xs text-gray-500 hover:text-brand-primary dark:text-gray-400 dark:hover:text-brand-accent transition-colors",children:"Reset All"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search reviews...",value:n,onChange:t=>w(t.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl text-sm focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary/30 outline-none text-gray-800 dark:text-gray-200 placeholder-gray-400"})]}),e.jsxs("select",{value:i,onChange:t=>k(t.target.value),className:"px-4 py-2.5 bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl text-sm focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary/30 outline-none text-gray-800 dark:text-gray-200",children:[e.jsx("option",{value:"all",children:"All Ratings"}),e.jsx("option",{value:"5",children:"⭐⭐⭐⭐⭐ (5 Stars)"}),e.jsx("option",{value:"4",children:"⭐⭐⭐⭐ (4 Stars)"}),e.jsx("option",{value:"3",children:"⭐⭐⭐ (3 Stars)"}),e.jsx("option",{value:"2",children:"⭐⭐ (2 Stars)"}),e.jsx("option",{value:"1",children:"⭐ (1 Star)"})]}),e.jsxs("select",{value:o,onChange:t=>N(t.target.value),className:"px-4 py-2.5 bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl text-sm focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary/30 outline-none text-gray-800 dark:text-gray-200",children:[e.jsx("option",{value:"all",children:"All Products"}),_.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:p,onChange:t=>C(t.target.value),className:"px-4 py-2.5 bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl text-sm focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary/30 outline-none text-gray-800 dark:text-gray-200",children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-white/5",children:e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",e.jsxs("span",{className:"font-bold text-brand-primary dark:text-brand-accent",children:[y+1,"-",Math.min(S,c.length)]})," of ",e.jsx("span",{className:"font-bold",children:c.length})," reviews"]})})]}),T?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(Y,{size:40,className:"text-brand-primary dark:text-brand-accent animate-spin mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading reviews..."})]}):R.length===0?e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-2xl p-12 text-center border border-dashed border-gray-200 dark:border-white/10",children:[e.jsx("div",{className:"w-16 h-16 bg-brand-primary/10 dark:bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Z,{size:32,className:"text-brand-primary dark:text-brand-accent"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:c.length===0&&(n||i!=="all"||o!=="all")?"No reviews match your filters":d==="pending"?"All caught up!":"No approved reviews yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:c.length===0&&(n||i!=="all"||o!=="all")?"Try adjusting your search or filters":d==="pending"?"No pending reviews at the moment.":"Approved reviews will appear here."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:R.map(t=>e.jsxs("div",{className:"bg-white dark:bg-[#1a1f2e] rounded-2xl p-6 border border-gray-100 dark:border-white/10 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-gray-100 dark:border-white/5",children:[t.productImage&&e.jsx("img",{src:G(t.productImage),alt:t.productName,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-sm text-gray-900 dark:text-white",children:t.productName}),e.jsx("p",{className:"text-xs text-gray-400",children:t.date})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"flex gap-0.5",children:[...Array(5)].map((a,r)=>e.jsx(ee,{size:14,className:`${r<t.rating?"fill-brand-accent text-brand-accent":"text-gray-300 dark:text-white/10"}`},r))}),e.jsxs("span",{className:"text-xs font-bold text-gray-600 dark:text-gray-400",children:["by ",t.author]})]}),e.jsx("h4",{className:"font-bold text-sm text-gray-900 dark:text-white mb-1",children:t.title}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 leading-relaxed",children:['"',t.content,'"']})]}),d==="pending"?e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>D(t.id),className:"flex-1 py-2.5 px-4 bg-green-500 hover:bg-green-600 text-white rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 shadow-sm",children:[e.jsx(H,{size:16}),"Approve"]}),e.jsxs("button",{onClick:()=>E(t.id),className:"flex-1 py-2.5 px-4 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 shadow-sm",children:[e.jsx(J,{size:16}),"Reject"]})]}):e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>q(t.id,t.isFeatured),className:`flex-1 py-2.5 px-4 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${t.isFeatured?"bg-brand-accent/20 text-brand-accent border-2 border-brand-accent":"bg-gray-100 dark:bg-white/5 text-gray-700 dark:text-gray-300 hover:bg-brand-accent/10 border-2 border-transparent"}`,children:["⭐ ",t.isFeatured?"Featured":"Feature"]}),e.jsxs("button",{onClick:()=>B(t.id),className:"flex-1 py-2.5 px-4 bg-red-500/10 hover:bg-red-500 text-red-600 hover:text-white dark:text-red-400 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 border border-red-500/20",children:[e.jsx(K,{size:16}),"Delete"]})]})]},t.id))}),h>1&&e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-[#1a1f2e] rounded-2xl p-4 border border-gray-100 dark:border-white/10",children:[e.jsxs("button",{onClick:()=>x(t=>Math.max(1,t-1)),disabled:l===1,className:"flex items-center gap-2 px-4 py-2 rounded-xl font-bold text-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5",children:[e.jsx(te,{size:16}),"Previous"]}),e.jsx("div",{className:"flex items-center gap-2",children:[...Array(h)].map((t,a)=>{const r=a+1;return r===1||r===h||r>=l-1&&r<=l+1?e.jsx("button",{onClick:()=>x(r),className:`w-10 h-10 rounded-xl font-bold text-sm transition-all ${l===r?"bg-brand-primary text-white dark:bg-brand-accent":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5"}`,children:r},r):r===l-2||r===l+2?e.jsx("span",{className:"text-gray-400",children:"..."},r):null})}),e.jsxs("button",{onClick:()=>x(t=>Math.min(h,t+1)),disabled:l===h,className:"flex items-center gap-2 px-4 py-2 rounded-xl font-bold text-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5",children:["Next",e.jsx(V,{size:16})]})]})]})]})}export{ce as default};
