import{b as N,r as l,j as e,n as $,o as z,s as B,p as v,S as D,U as R,q as I,X as T,k as L,u as P,g as C,M as H,t as M}from"./index-CNOJuLki.js";import{P as V,S as U}from"./ProductCard-DgpA-uKm.js";import{S as _}from"./SEO-B2v4AauL.js";import{L as F}from"./loader-circle-CXf-KTYE.js";import{S as k}from"./star-DmHls7K5.js";import{S as q}from"./shield-check-VuykFEEs.js";import{A as O}from"./arrow-left-BrKbESJ7.js";import{C as A}from"./calendar-87NnKot1.js";import{S as E}from"./shield-rEek1f7x.js";import{T as W}from"./truck-DDIbYc1H.js";function Q({currentProduct:s}){const{products:o}=N(),b=l.useMemo(()=>{if(!s||!o.length)return[];const n=o.filter(i=>i.categoryId===s.categoryId&&i.id!==s.id).slice(0,4);if(n.length<4){const i=o.filter(m=>m.categoryId!==s.categoryId&&m.id!==s.id&&!n.find(a=>a.id===m.id)).slice(0,4-n.length);return[...n,...i]}return n},[s,o]);return b.length===0?null:e.jsxs("section",{className:"py-16 border-t border-gray-100 dark:border-white/10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-gray-900 dark:text-[#F5F5F5] mb-4",children:"You May Also Like"}),e.jsx("div",{className:"w-24 h-1 bg-brand-accent mx-auto rounded-full opacity-60"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:b.map(n=>e.jsx("div",{className:"h-full",children:e.jsx(V,{product:n})},n.id))})]})}function Y({product:s}){const{addToCart:o}=$(),{addToast:b}=z(),[n,i]=l.useState(!1),[m,a]=l.useState(!1);l.useEffect(()=>{const g=()=>{window.scrollY>300?a(!0):a(!1)};return window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g)},[]);const d=()=>{o(s),b(`Added ${s.name} to Basket`,"success"),i(!0),setTimeout(()=>i(!1),2e3)};return s?e.jsx("div",{className:`
                fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-[#1A1D23] border-t border-gray-100 dark:border-white/10 p-4 md:hidden shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]
                transition-transform duration-300 transform
                ${m?"translate-y-0":"translate-y-full"}
            `,children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-brand-primary dark:text-gray-400 font-bold uppercase tracking-wider",children:s.name}),e.jsxs("span",{className:"text-lg font-bold text-brand-primary dark:text-brand-accent",children:[B.currency,s.price]})]}),e.jsx("button",{onClick:d,disabled:n,className:`
                        flex-1 py-3 px-6 rounded-full font-bold text-sm uppercase tracking-widest flex items-center justify-center gap-2 transition-all shadow-lg
                        ${n?"bg-green-600 text-white":"bg-brand-primary text-white hover:bg-brand-primary/90"}
                    `,children:n?e.jsxs(e.Fragment,{children:[e.jsx(v,{size:18}),"Added"]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{size:18}),"Add to Basket"]})})]})}):null}function G({productId:s,className:o}){const{getReviews:b,addReview:n}=N(),[i,m]=l.useState([]),[a,d]=l.useState(!0),[g,h]=l.useState(!1),[u,y]=l.useState(!1),[x,c]=l.useState({author:"",rating:5,content:""});l.useEffect(()=>{s&&j()},[s]);const j=async()=>{d(!0);const r=await b(s);m(r),d(!1)},f=async r=>{r.preventDefault(),y(!0),await n(s,x)&&(h(!1),c({author:"",rating:5,content:""}),j()),y(!1)},p=i.length>0?(i.reduce((r,w)=>r+w.rating,0)/i.length).toFixed(1):"5.0";return a?e.jsxs("div",{className:`mt-20 flex flex-col items-center justify-center py-20 ${o}`,children:[e.jsx(F,{size:40,className:"text-brand-primary animate-spin mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Loading reviews..."})]}):e.jsxs("div",{className:`mt-20 ${o}`,children:[e.jsxs("h3",{className:"text-2xl font-serif font-bold text-brand-primary dark:text-[#F5F5F5] mb-8 flex items-center gap-4",children:["Customer Reviews",i.length>0&&e.jsxs("span",{className:"text-sm font-sans font-normal bg-brand-primary/10 dark:bg-brand-accent/10 text-brand-primary dark:text-brand-accent px-3 py-1 rounded-full",children:[p,"/5 Rating"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-brand-primary/5 dark:bg-[#1F2833]/50 rounded-[20px] p-8 flex flex-col justify-center items-center text-center border border-brand-primary/10 dark:border-white/5 h-fit",children:[e.jsx("div",{className:"text-6xl font-black text-brand-primary dark:text-white mb-2",children:p}),e.jsx("div",{className:"flex gap-1 mb-4",children:[1,2,3,4,5].map(r=>e.jsx(k,{size:24,className:`${r<=Math.round(Number(p))?"fill-brand-accent text-brand-accent":"text-gray-300 dark:text-white/10"}`},r))}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6",children:i.length>0?`Based on ${i.length} verified ${i.length===1?"review":"reviews"}`:"Be the first to review this product"}),e.jsx("button",{onClick:()=>h(!0),className:"w-full py-3 rounded-xl bg-white dark:bg-[#0B0C10] border-2 border-brand-primary/10 dark:border-white/10 text-brand-primary dark:text-brand-accent font-bold hover:bg-brand-primary hover:text-white dark:hover:bg-brand-accent dark:hover:text-brand-primary transition-all shadow-sm",children:"Write a Review"})]}),e.jsx("div",{className:"space-y-6",children:i.length>0?e.jsx(e.Fragment,{children:i.map(r=>e.jsxs("div",{className:"border-b border-gray-100 dark:border-white/5 pb-6 last:border-0 last:pb-0 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-white/10 flex items-center justify-center",children:e.jsx(R,{size:14,className:"text-gray-500 dark:text-gray-400"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:r.author}),r.verified&&e.jsxs("span",{className:"text-[10px] text-green-600 dark:text-green-400 flex items-center gap-0.5 mt-0.5",children:[e.jsx(q,{size:10})," Verified Buyer"]})]})]}),e.jsx("span",{className:"text-xs text-gray-400",children:r.date})]}),e.jsx("div",{className:"flex gap-0.5 mb-2",children:[...Array(5)].map((w,t)=>e.jsx(k,{size:12,className:`${t<r.rating?"fill-brand-accent text-brand-accent":"fill-gray-200 text-gray-200 dark:text-white/10 dark:fill-white/10"}`},t))}),e.jsx("h4",{className:"font-bold text-sm text-gray-900 dark:text-gray-200 mb-1",children:r.title}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:['"',r.content,'"']})]},r.id))}):e.jsx("div",{className:"py-10 text-center bg-gray-50 dark:bg-white/5 rounded-2xl border border-dashed border-gray-200 dark:border-white/10",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No reviews yet for this product."})})})]}),g&&I.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>!u&&h(!1)}),e.jsxs("div",{className:"relative w-full max-w-lg bg-white dark:bg-[#151c24] rounded-[32px] shadow-2xl overflow-hidden animate-modal-in border border-white/10",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-white/5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-serif font-bold text-gray-900 dark:text-white",children:"Quick Review"}),e.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:"Takes less than a minute"})]}),e.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors",children:e.jsx(T,{size:18,className:"text-gray-400"})})]}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-5",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-5 bg-brand-primary/5 dark:bg-white/5 rounded-2xl",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3",children:"How would you rate it?"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(r=>e.jsx("button",{type:"button",onClick:()=>c({...x,rating:r}),className:"transition-transform hover:scale-110 active:scale-95",children:e.jsx(k,{size:36,className:`${r<=x.rating?"fill-brand-accent text-brand-accent":"text-gray-300 dark:text-white/10"}`})},r))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-2 ml-1 group-focus-within:text-brand-primary transition-colors",children:["Your Name ",e.jsx("span",{className:"text-gray-400 normal-case",children:"(optional)"})]}),e.jsx("input",{type:"text",value:x.author,onChange:r=>c({...x,author:r.target.value}),placeholder:"Anonymous",className:"w-full px-4 py-3 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary outline-none transition-all text-sm text-gray-900 dark:text-white placeholder-gray-400"})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-2 ml-1 group-focus-within:text-brand-primary transition-colors",children:"Share your thoughts"}),e.jsx("textarea",{required:!0,value:x.content,onChange:r=>c({...x,content:r.target.value}),placeholder:"What did you like about this product?",rows:3,className:"w-full px-4 py-3 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary outline-none transition-all text-sm text-gray-900 dark:text-white placeholder-gray-400 resize-none"})]})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full py-4 bg-brand-primary text-white rounded-2xl font-bold text-sm tracking-widest uppercase hover:bg-brand-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-xl shadow-brand-primary/20 flex items-center justify-center gap-3",children:u?e.jsxs(e.Fragment,{children:[e.jsx(F,{size:18,className:"animate-spin"}),"Submitting..."]}):"Submit Review"})]})]})]}),document.body)]})}function ne(){const{id:s}=L(),o=P(),{addToCart:b}=$(),{showToast:n}=z(),{products:i,loading:m}=N(),a=i.find(t=>String(t.id)===s),[d,g]=l.useState(null),[h,u]=l.useState(null),[y,x]=l.useState(!1);if(l.useEffect(()=>{a&&(u(a.image),a.variants&&a.variants.length>0?g(a.variants[0]):a.weights&&a.weights.length>0&&g(a.weights[0]))},[a]),m)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-[#F5F4ED] to-[#ECEBE4] dark:from-[#1A1D23] dark:to-[#0B0C10]",children:e.jsx("div",{className:"w-12 h-12 border-4 border-brand-primary/10 border-t-brand-primary rounded-full animate-spin"})});if(!a)return e.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center bg-gradient-to-b from-[#F5F4ED] to-[#ECEBE4] dark:from-[#1A1D23] dark:to-[#0B0C10]",children:[e.jsx("h2",{className:"text-3xl font-serif text-brand-primary dark:text-[#F5F5F5] mb-4",children:"Product Unavailable"}),e.jsx("p",{className:"text-gray-500 mb-6 font-sans",children:"We couldn't find the product you're looking for."}),e.jsx("button",{onClick:()=>o("/products"),className:"px-8 py-3 bg-brand-primary text-white rounded-full font-bold uppercase tracking-wider text-xs hover:bg-brand-primary/90 transition-all shadow-lg",children:"Return to Collection"})]});const c=a.variants&&a.variants.length>0,j=c&&d?d.price:a.price,f=c&&d?d.weight:d,p=[a.image];c&&a.variants.forEach(t=>{t.image&&!p.includes(t.image)&&p.push(t.image)});const r=()=>{b({...a,price:j,image:c&&d?d.image:a.image,selectedVariant:f,name:f?`${a.name} (${f})`:a.name}),n(`Added ${a.name} to Basket`,"success"),x(!0),setTimeout(()=>x(!1),2e3)},w=t=>{g(t),t.image&&u(t.image)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#F5F4ED] to-[#ECEBE4] dark:from-[#1A1D23] dark:to-[#0B0C10] pt-32 pb-20 animate-fade-in relative",children:[e.jsx(_,{title:a.name,description:a.shortDescription||a.description,image:a.image,url:`/product/${a.id}`}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("button",{onClick:()=>o(-1),className:"flex items-center text-gray-500 dark:text-gray-400 hover:text-brand-primary dark:hover:text-brand-accent mb-10 transition-colors uppercase tracking-widest text-xs font-bold group",children:[e.jsx(O,{className:"w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform"}),"Back to Collection"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-16 gap-y-12 items-start",children:[e.jsxs("div",{className:"lg:sticky lg:top-32 relative",children:[e.jsxs("div",{className:"relative aspect-square rounded-[30px] overflow-hidden shadow-2xl group mb-6",children:[e.jsx("img",{src:C(h||a.image),alt:a.name,className:"w-full h-full object-cover object-center transform transition-transform duration-700 group-hover:scale-110 animate-fade-in"},h||"default"),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-60"}),a.badge&&e.jsx("div",{className:"absolute top-6 left-6",children:e.jsx("span",{className:"bg-brand-primary text-white text-xs font-bold px-4 py-2 rounded-full uppercase tracking-wider shadow-lg",children:a.badge})})]}),p.length>1&&e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2 scrollbar-hide",children:p.map((t,S)=>e.jsx("button",{onClick:()=>u(t),className:`relative w-20 h-20 rounded-xl overflow-hidden border-2 transition-all flex-shrink-0 ${h===t?"border-brand-primary ring-2 ring-brand-primary/20":"border-transparent opacity-70 hover:opacity-100 hover:border-gray-300"}`,children:e.jsx("img",{src:C(t),alt:`View ${S+1}`,className:"w-full h-full object-cover"})},S))})]}),e.jsxs("div",{className:"flex flex-col justify-center lg:pt-8 text-left",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-brand-accent text-xs font-bold uppercase tracking-[0.2em] mb-3",children:[e.jsx(U,{size:14}),e.jsx("span",{children:"Organic Harvest"})]}),e.jsx("h1",{className:"text-4xl md:text-5xl font-serif text-brand-primary dark:text-[#F5F5F5] tracking-tight leading-tight mb-4",children:a.name}),e.jsxs("div",{className:"flex items-end gap-3 mb-8",children:[e.jsxs("p",{className:"text-3xl text-brand-primary dark:text-white font-sans font-bold",children:[B.currency,j]}),e.jsx("span",{className:`text-sm mb-1.5 font-medium flex items-center gap-1 ${a.seasonalStatus==="starting-soon"?"text-amber-500":"text-gray-500 dark:text-gray-400"}`,children:a.seasonalStatus==="starting-soon"?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-4 h-4"}),"Harvest Starting Soon"]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-4 h-4 text-green-500"}),"In Stock"]})})]})]}),(c||a.weights&&a.weights.length>0)&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-gray-900 dark:text-white mb-3",children:"Select Quantity"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:c?a.variants.map(t=>e.jsx("button",{onClick:()=>w(t),className:`px-6 py-3 rounded-xl text-sm font-bold border-2 transition-all duration-200 ${(d==null?void 0:d.weight)===t.weight?"border-brand-primary bg-brand-primary text-white shadow-lg shadow-brand-primary/20 transform -translate-y-1":"border-gray-200 dark:border-white/10 text-gray-600 dark:text-gray-300 hover:border-brand-primary/50 dark:hover:border-white/30"}`,children:t.weight},t.weight)):a.weights.map(t=>e.jsx("button",{onClick:()=>g(t),className:`px-6 py-3 rounded-xl text-sm font-bold border-2 transition-all duration-200 ${d===t?"border-brand-primary bg-brand-primary text-white shadow-lg shadow-brand-primary/20 transform -translate-y-1":"border-gray-200 dark:border-white/10 text-gray-600 dark:text-gray-300 hover:border-brand-primary/50 dark:hover:border-white/30"}`,children:t},t))})]}),e.jsx("div",{className:"mb-8",children:e.jsx("button",{onClick:r,disabled:y||a.seasonalStatus==="starting-soon",className:`w-full py-5 rounded-[20px] text-lg font-bold uppercase tracking-[0.2em] transition-all duration-300 shadow-lg flex items-center justify-center gap-3 group ${y?"bg-green-600 text-white shadow-green-500/20 translate-y-1":a.seasonalStatus==="starting-soon"?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-brand-primary text-white hover:bg-brand-primary/90 hover:shadow-xl hover:shadow-brand-primary/20 hover:-translate-y-1"}`,children:a.seasonalStatus==="starting-soon"?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-5 h-5"}),"Harvest Starting Soon"]}):y?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-6 h-6 animate-bounce"}),"Added to Basket!"]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),"Add to Basket",f&&e.jsxs("span",{className:"opacity-60 text-sm normal-case font-medium",children:["(",f,")"]})]})})}),a.categoryId==="seasonal-fruits"&&e.jsx("div",{className:"mb-8 p-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-800/40 rounded-full text-amber-700 dark:text-amber-400",children:e.jsx(E,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-900 dark:text-amber-100 text-sm mb-1",children:"Cash on Delivery Unavailable"}),e.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-200/80 leading-relaxed",children:"Advance payment required for fresh fruits to ensure timely delivery."})]})]})}),e.jsx("div",{className:"h-px w-full bg-gradient-to-r from-brand-primary/10 to-transparent dark:from-white/10 mb-8"}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-brand-primary dark:text-brand-accent mb-4",children:"Product Details"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 font-light leading-relaxed",children:a.longDescription||a.description})]}),a.harvestProcess&&e.jsxs("div",{className:"mb-8 p-6 bg-white dark:bg-[#1F2833] rounded-[24px] shadow-sm border border-gray-100 dark:border-white/5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity",children:e.jsx(H,{size:100,className:"text-brand-primary dark:text-white"})}),e.jsxs("div",{className:"relative z-10 flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-brand-accent/10 flex items-center justify-center text-brand-accent",children:e.jsx(M,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-serif font-bold text-gray-900 dark:text-white mb-2",children:"How we Harvest"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed font-light",children:a.harvestProcess})]})]})]}),a.features&&e.jsxs("div",{className:"mb-10",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-brand-primary dark:text-brand-accent mb-4",children:"Highlights"}),e.jsx("ul",{className:"space-y-3",children:a.features.map(t=>e.jsxs("li",{className:"flex items-center text-gray-700 dark:text-gray-300 font-light",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-brand-primary dark:bg-brand-accent mr-4"}),t]},t))})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-center gap-8 py-6 border-t border-gray-100 dark:border-white/10",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wider",children:[e.jsx(E,{className:"w-4 h-4 mr-2 text-brand-accent"}),e.jsx("span",{children:"Quality Guarantee"})]}),e.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-white/10"}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wider",children:[e.jsx(W,{className:"w-4 h-4 mr-2 text-brand-accent"}),e.jsx("span",{children:"Secure Shipping"})]})]})]})]}),e.jsx(G,{productId:a.id,className:"mb-20 py-20 border-t border-gray-100 dark:border-white/5"}),e.jsx(Q,{currentProduct:a}),e.jsx(Y,{product:a})]})]})}export{ne as ProductDetails};
